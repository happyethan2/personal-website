---
const { tags = [], action = Astro.url.pathname } = Astro.props;
const { searchParams } = Astro.url;
const q    = searchParams.get('q')    ?? '';
const tag  = searchParams.get('tag')  ?? '';
const sort = searchParams.get('sort') ?? 'date-desc';
---
<form method="get" action={action} class="flex flex-wrap items-center gap-3 text-sm">
  <input
    name="q"
    value={q}
    placeholder="Search title..."
    class="bg-slate-900 border border-slate-800 rounded px-2 py-1"
    oninput="this.form.requestSubmit()"
  />
  <select
    name="tag"
    class="bg-slate-900 border border-slate-800 rounded px-2 py-1"
    onchange="this.form.requestSubmit()"
  >
    <option value="">All tags</option>
    {tags.map(t => <option value={t} selected={tag === t}>{t}</option>)}
  </select>
  <select
    name="sort"
    class="bg-slate-900 border border-slate-800 rounded px-2 py-1"
    onchange="this.form.requestSubmit()"
  >
    <option value="date-desc" selected={sort==='date-desc'}>Newest</option>
    <option value="date-asc"  selected={sort==='date-asc'}>Oldest</option>
    <option value="name-az"   selected={sort==='name-az'}>Title A→Z</option>
    <option value="name-za"   selected={sort==='name-za'}>Title Z→A</option>
  </select>
</form>
